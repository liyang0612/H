<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <title></title>
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link href="../css/mui.min.css" rel="stylesheet" />
  <link href="../css/global.css" rel="stylesheet" />
  <!--引入播放器样式-->
  <link href="https://cdn.bootcss.com/video.js/7.5.0/alt/video-js-cdn.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/video.js/7.5.0/video.min.js"></script>
  <script src="https://cdn.bootcss.com/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js"></script>
  <script src="http://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
  <script src="../js/client.js"></script>
</head>

<style>
  html,
  body {
    background: transparent;
  }

  .content {
    position: absolute;
    background: rgba(0, 0, 0, .05);
    width: 100%;
    top: 0;
    left: 0;
  }

  footer {
    position: absolute;
    bottom: 0;
    left: 0;
    color: #fff;
    padding: 30px 10px;
    line-height: 28px;
    font-size: 16px;
    pointer-events: none;
  }

  .right-wrap {
    position: absolute;
    right: 0;
    bottom: 20px;
  }

  .menu-item {
    width: 60px;
    margin-bottom: 10px;
  }

  .menu-item .icon {
    width: 40px;
    height: 40px;
    margin: 0 auto;
  }

  .icon_online_num {
    background: url(../img/online_number.png) no-repeat;
    background-size: 100%;
  }

  .icon_msg {
    background: url(../img/msg_btn.png) no-repeat;
    background-size: 100%;
  }

  .icon_share {
    background: url(../img/share.png) no-repeat;
    background-size: 100%;
  }

  .icon_glod_coin {
    background: url(../img/gold_coin.png) no-repeat;
    background-size: 100%;
  }

  .menu-item .txt {
    font-size: 14px;
    line-height: 22px;
    color: #fff;
    text-align: center;
  }

  .block {
    float: left;
    width: 25%;
    height: 16.66%;
    color: #fff;
  }

  .dialog-content .mui-icon {
    position: absolute;
    right: 5px;
    top: 5px;
    z-index: 99;
  }

  .dialog {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 99;
    background: rgba(0, 0, 0, .7);
  }

  .dialog-content {
    position: relative;
    width: 86%;
    height: 76%;
    margin: 54px auto;
    background: #fff;
    border-radius: 12px;
  }

  .dialog-top {
    width: 100%;
    height: 50%;
    background: #e9f5fe;
    border-radius: 12px 12px 0 0;
    position: relative;
  }

  .dialog-bottom {
    width: 100%;
    height: 50%;
    background: #fff;
    border-radius: 0 0 12px 12px;
    position: relative;
  }

  .dialog-bottom .btns {
    position: absolute;
    bottom: 0;
    text-align: center;
    width: 100%;
    display: flex;
    border-top: solid 1px #ddd;
    height: 54px;
    line-height: 54px;
  }

  .dialog-bottom .btns>div {
    flex: 1;
    color: #4FB4F8;
  }

  .dialog-bottom .pay_btns_wrap {
    position: absolute;
    width: 94%;
    margin: 0 auto;
    background: #fff;
    height: 100%;
    top: -15px;
    left: 0;
    right: 0;
  }

  .pay_btns_wrap h4 {
    font-size: 12px;
    padding: 3px 10px;
    margin-bottom: 10px;
  }

  .pay_btns {
    width: 100%;
  }

  .pay_btns::after {
    content: '';
    display: block;
    clear: both;
  }

  .pay_btns .active .btn {
    background: #fcdc06;
  }

  .pay_btns .pay_btn.active .btn>p {
    color: #000
  }

  .pay_btns .pay_btn {
    width: 33.33%;
    float: left;
    padding: 0 5px;
    margin-bottom: 10px;
  }

  .pay_btns .pay_btn .btn {
    height: 2.8rem;
    border-radius: 6px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0, 0, 0, .1);
    padding: 0.36rem
  }

  .pay_btns .pay_btn .btn p {
    margin-bottom: 0;
    color: #fcdc06;
    font-size: 14px;
    line-height: 14px;
  }

  .pay_btns .pay_btn .btn .rmb {
    font-size: 12px;
    line-height: 12px;
    padding-top: 0.2rem;
  }

  .wraning {
    font-size: 16px;
    color: #4FB4F8;
    text-align: center;
    margin-top: 10px;
  }

  .dialog-select-goods {
    position: absolute;
    top: 40px;
    width: 90%;
    left: 0;
    right: 0;
    margin: 0 auto;
    z-index: 99
  }

  .dialog-select-goods .bg {
    overflow: hidden;
    margin: 0 auto;
    width: 17.5rem;
    height: 17.5rem
  }

  .dialog-select-goods .bg img {
    width: 100%;
  }

  .select-goods-txt {
    width: 100%;
    margin-top: 20px;
    line-height: 24px;
    color: #f6be5d;
    font-size: 16px;
    text-align: center;
  }

  .dialog_get_goods {
    position: absolute;
    z-index: 99;
    top: 6rem;
    width: 17rem;
    height: 17rem;
    left: 0;
    right: 0;
    margin: 0 auto;
  }

  .dialog_get_goods .bg {
    width: 100%;
    overflow: hidden;
  }

  .goods_pic {
    width: 64%;
    height: 64%;
    border-radius: 8px;
    overflow: hidden;
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    margin: auto;
    background: #fff;
  }

  .goods_pic img {
    width: 100%;
  }

  .dialog_get_goods .bg img {
    width: 100%;
  }

  .get_goods_txt {
    color: #e64357
  }

  .pay_gold_coin {
    position: absolute;
    bottom: 45px;
    width: 100%;
  }

  .pay_gold_coin .bg {
    width: 8rem;
    height: 7rem;
    margin: 0 auto;
  }

  .pay_gold_coin .bg img {
    width: 100%;
  }

  .pay_gold_coin .txt {
    color: #fcdc06;
    font-size: 14px;
    text-align: center;
  }

  #loading_wrap {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: 999;
    top: 0;
    left: 0;
  }

  .mui-spinner {
    width: 32px;
    height: 32px;
  }

  .loading_block {
    width: 80px;
    height: 70px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -40px;
    margin-top: -35px;
    border-radius: 8px;
    text-align: center;
  }

  .loading_block .txt {
    color: #fff;
    text-shadow: 2px 0 2px rgba(0, 0, 0, .4);
    padding: 5px
  }
  video {
      position: relative;
      height: 100%;
      object-fit: fill;
      margin: 0;
      padding: 0;
  }
</style>

<body>
  <div class="video_wrap">
    <video id="example_video_1" class="video-js vjs-default-skin vjs-big-play-centered" preload="auto"
      x-webkit-airplay="true" x5-video-player-type="h5" x5-video-player-fullscreen="true" x5-playsinline="true" webkit-playsinline="true" playsinline="true">
      <!-- <source src="http://fd.jktwo.com/live/40871_7129c404c6a772a26414a0c6ec6ad85b.m3u8" type="application/x-mpegURL"> -->
    </video>
  </div>
  <div id="loading_wrap" style="display: none;">
    <div class="loading_block">
      <div><span class="mui-spinner"></span></div>
      <div class="txt">等待中</div>
    </div>
  </div>
  <!--选择货道-->
  <div class="dialog" id="select_goods">
    <div class="dialog-content">
      <div class="dialog-select-goods">
        <div class="bg">
          <img src="../img/select_goods.png" />
        </div>
        <div class="select-goods-txt">
          确认选择第<span class="goods_num">1</span>个货道 <br />
          消费10金币
        </div>

      </div>
      <div class="dialog-top"></div>
      <div class="dialog-bottom">
        <div class="btns">
          <div id="cancelBtn">取消</div>
          <div id="okBtn">确定</div>
        </div>
      </div>
    </div>
  </div>
  <!--获取商品通知-->
  <div class="dialog" id="get_goods" style="display: none;">
    <div class="dialog-content">
      <span id="close" class="mui-icon mui-icon-closeempty"></span>
      <div class="dialog_get_goods">
        <div class="bg">
          <div class="goods_pic">
            <img src="../img/amount_symbol.png">
          </div>
          <img src="../img/goods_bg.png" />
        </div>
        <div class="select-goods-txt get_goods_txt">
          恭喜<span id="getGoodsUserName">你</span><br />
          获得价值<span id="goodsPrice">299</span>元的<span id="goodsName">蓝牙耳机</span>一副
        </div>
      </div>
      <div class="dialog-top"></div>
      <div class="dialog-bottom" id="meGet" style="display: none;">
        <div class="btns">
          <div id="cancelBtn">填写收获地址</div>
          <!-- <div id="okBtn">赠送给微信好友</div> -->
        </div>
      </div>
      <div class="dialog-bottom" id="otherGet" style="display: none;">
        <div class="btns">
          <div id="okBtn">确定</div>
        </div>
      </div>
    </div>
  </div>
  <!--充值金币-->
  <div class="dialog" id="gold_coin_pay" style="display: none;">
    <div class="dialog-content">
      <span id="close" class="mui-icon mui-icon-closeempty"></span>
      <div class="dialog-top">
        <div class="pay_gold_coin">
          <div class="bg">
            <img src="../img/gold_coin.png">
          </div>
          <div class="txt">游戏单价：<span>10</span>金币/次</div>
        </div>
      </div>
      <div class="dialog-bottom">
        <div class="pay_btns_wrap">
          <h4>请选择充值金额</h4>
          <div class="pay_btns">
            <div class="pay_btn">
              <div class="btn">
                <p class="gold">10金币</p>
                <p class="rmb">10元</p>
              </div>
            </div>
            <div class="pay_btn">
              <div class="btn">
                <p class="gold">20金币</p>
                <p class="rmb">20元</p>
              </div>
            </div>
            <div class="pay_btn">
              <div class="btn">
                <p class="gold">50金币</p>
                <p class="rmb">50元</p>
              </div>
            </div>
            <div class="pay_btn">
              <div class="btn">
                <p class="gold">100金币</p>
                <p class="rmb">100元</p>
              </div>
            </div>
            <div class="pay_btn">
              <div class="btn">
                <p class="gold">150金币</p>
                <p class="rmb">150元</p>
              </div>
            </div>
            <div class="pay_btn">
              <div class="btn">
                <p class="gold">200金币</p>
                <p class="rmb">200元</p>
              </div>
            </div>
          </div>
          <div class="wraning"></div>
        </div>
        <div class="btns">
          <div id="okBtn">微信支付</div>
        </div>
      </div>
    </div>
  </div>
  <div class="content">
    <div class="right-wrap">
      <div class="menu-item">
        <div class="icon icon_online_num"></div>
        <div class="txt"><span id="online_txt">0<span>人</div>
      </div>
      <!-- 				<div class="menu-item">
					<div class="icon icon_msg"></div>
					<div class="txt">消息</div>
				</div> -->
      <!-- <div class="menu-item" id="shareBtn">
        <div class="icon icon_share"></div>
        <div class="txt">分享</div>
      </div> -->
      <div class="menu-item" id="show_dialog_glod">
        <div class="icon icon_glod_coin"></div>
        <div class="txt"><span id="gold_coin_num"></span>金币</div>
      </div>
    </div>
    <footer>
      @All<br />
      欢迎来到线上福袋机游戏间<br />
      请选择点击你选择的福袋开始游戏
    </footer>
  </div>
  <!-- 		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item mui-active" href="./component/home.html">
				<div class="me_nav_icon home_icon active"></div>
			</a>
			<a id="meHref" class="mui-tab-item" href="./component/me.html">
				<div class="me_nav_icon me_icon"></div>
			</a>
		</nav> -->
</body>
<script src="../js/mui.min.js"></script>
<script src="../js/config.js"></script>
<script src="../js/jquery.min.js"></script>
<script>
  var studioDetail = {}
  var money = 0  //充值金币
  var Balance = 0
  var onlineStr = ''
  var u = navigator.userAgent, app = navigator.appVersion;
  var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //g
  var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端

  function getOpenid() {
      $http({
        url: '/auth/user/v2/wechat/h5/get/openid',
        data: {
          code: localStorage.getItem('code')
        },
        success: function (res) {
          if (res.code == 10000) {
            window.localStorage.setItem('openid', res.msg.openid)
          }else {
            // alert('获取openid失败'+JSON.stringify(res))
          }
        },
      })
    }
  //支付
  function recharge(money) {
    $http({
      url: '/auth/user/v2/h5/wechat/recharge',
      data: {
        money: money * 100,
        openid: localStorage.getItem('openid'),
        token: localStorage.getItem('token')
      },
      success: function (res) {
        if (res.code === 10000) {
          WeixinJSBridge.invoke(
            'getBrandWCPayRequest', {
              "appId": res.msg.appid,     //公众号名称，由商户传入     
              "timeStamp": res.msg.timestamp,         //时间戳，自1970年以来的秒数     
              "nonceStr": res.msg.noncestr, //随机串     
              "package": 'prepay_id='+res.msg.prepayid,
              "signType": "MD5",         //微信签名方式：     
              "paySign": res.msg.sign //微信签名 
            },
            function (res) {
              if (res.err_msg == "get_brand_wcpay_request:ok") {
                mui.toast('支付成功！')
                getGoldcoin()
                // 使用以上方式判断前端返回,微信团队郑重提示：
                //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。
              }else {
                mui.toast('支付失败，请重试！')
              }
            })
          // wx.chooseWXPay({
          //   timestamp: res.msg.timestamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符
          //   nonceStr: res.msg.noncestr, // 支付签名随机串，不长于 32 位
          //   package: 'prepay_id=' + res.msg.prepayid, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\*\*\*）
          //   signType: 'MD5', // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'
          //   paySign: res.msg.sign, // 支付签名
          //   success: function (res) {
          //     // 支付成功后的回调函数
          //     mui.toast('充值成功！')
          //   }
          // });
        } else {
          // alert('调起支付失败'+ JSON.stringify(res))
          mui.toast('支付失败，请重试')
        }
      },
      error: function (err) {
        // alert('支付异常' + JSON.stringify(err))
        mui.toast('支付异常，请重试')
      }
    })
  }
  //分享
  function shareFunc(roomId, uid) {
    wx.updateAppMessageShareData({
      title: '言国互娱', // 分享标题
      desc: '快来开始游戏，赢取礼品吧', // 分享描述
      link: 'http://h5game.jktwo.com/login.html?roomId=' + roomId + '&uid=' + uid, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
      imgUrl: '', // 分享图标
      success: function () {
        // 设置成功
      }
    })
  }
  
  function getDetail() {
    $http({
      type: 'post',
      url: '/auth/user/v2/get/live/info',
      data: {
        id: localStorage.getItem('ID'),
        token: localStorage.getItem('token')
      },
      // data: {
      //   "id": 6,
      //   "token": "q1hGss70hPjyf4aLB60hePdxvRe2Gq9RrqkHxB1wT7EzVc06ttqXOPl2MQ6/JXfex+MREYEsmPY6wVo8mauHJIARe0z0kBd4iraBsj/KUSbusKQoyNVRZggincgal3hWmbafnonOedlpRbyV7/1OSONB+4xi5ob6ap6I+Vp1Tsx2kLuCgKqG2JRKRp1RFKzpK0/Iq53f6iuLEJdMcr6vHko2CoKB0XQtJr3m30p309XM28baDP4X2V1oU4ESyo5i6gZmKoZVKGBj0Qd7PPdoc/gH/LwvnPHdgMKgObUb7vbzdCJmrq/6egOOa3P/OA8WXA44S6ffjjJYK1bJYUYq0y7va2pWcjmCL6Lj5/Ah+/XG/1N6XflgrVCtngyP7jdlmqMyjAOZzB8yAambWqUXkyGWFB0nQqIAjF7Y31qAkW5sEDIi4fNaz/ArhspbumXb3E4AocsQwpS3ykJmojYCErKc5oCh8dOo2Tk3LqT4KQHTx9X/3umbdnUnTk06XAzUQ4Q2vNv0HK4eeNvea9djpbK0rh8j1xLvniwirdyvCqOtoBfVqlPItJAQhlxz0iIjUmllhn+okV0APY3+cTaM7TzGTUyvMoZOlmRklhqB8TBQ9FQFQ4Q4OdN4WDxSjrjEuirqM11Uz+alLRYBRUqhfvgJTvq9CwT4+gHqUSw3Rul8ZgCY7XxajMcYjUrOt3Oho6Kb"
      // },
      success: function (res) {
        if (res.code === 10000) {
          studioDetail = res.msg
          initWebsocket()
          var clientH = document.documentElement.clientHeight;
          var clientW = document.documentElement.clientWidth;
          var player = videojs('example_video_1', {
            muted: true,
            controls: true,
            height: (isIOS ? clientH : (clientH + 80)) || "100%",
            width: clientW || '100%',
            loop: true,
            sources: [{
              type: "application/x-mpegURL",
              src: res.msg.HlsPull
            }]
            // 更多配置.....
          }, function (params) {
            // exitFullscreen()
            $("video").on('play', function (res) {
              var $video = $('video');
              $video[0].addEventListener('x5videoexitfullscreen', function () {
                $('.video_wrap').height(clientH)
                $('.content').height(clientH)
                $('#example_video_1').height(clientH)
              });
              // var offsetY = $video[0].clientHeight - ($video[0].clientWidth * $video[0].videoHeight / $video[0].videoWidth)
              $video[0].style["object-position"] = "0px 0px"
              $('.content').css('height', (isIOS ? clientH : (clientH + 80)) + 'px')
              var blocks = [];
              for (var i = 0; i < 24; i++) {
                blocks.push('<div class="block"></div>');
              }
              $('.content').append(blocks.join(''))
              $(".block").each(function (index) {
                $(this).on('tap', function (event) {
                  if (Balance < 10) {
                    $('#gold_coin_pay').show()
                    return false
                  }
                  $('#select_goods').show();
                  $('.goods_num').text(index + 1)
                })
              })
            })
          });
        } else {
        }
      }
    })
  }
  $(function () {
    if (isAndroid) {
      $('.video_wrap').height(document.documentElement.clientHeight + 80)
    }
    if (isIOS) {
      $('.video_wrap').height(document.documentElement.clientHeight)
    }
    
    $('.video_wrap').width(document.documentElement.clientWidth)
    //获取直播间详情
    getDetail()
    //获取签名
    $http({
      type: 'get',
      url: '/auth/user/v2/get/jssdk/config',
      data: {},
      success: function (res) {
        if (res.code === 10000) {
          console.log('返回', res.msg)
          wx.config({
            // debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: res.msg.appId, // 必填，公众号的唯一标识
            timestamp: res.msg.timestamp, // 必填，生成签名的时间戳
            nonceStr: res.msg.noncestr, // 必填，生成签名的随机串
            signature: res.msg.signature,// 必填，签名
            jsApiList: ['chooseWXPay', 'updateAppMessageShareData'] // 必填，需要使用的JS接口列表
          });
          wx.ready(function () {
            // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。
            $('#gold_coin_pay #okBtn').on('tap', function () {
              if (!money) {
                mui.toast('请选择充值金额')
                return
              }
              recharge(parseInt(money))
            })
            // $('#shareBtn').on('tap', function () {
            //   shareFunc(localStorage.getItem('roomId'), localStorage.getItem('uid'))
            // })
            console.log('成功')
          });
          wx.error(function (res) {
            console.log('失败')
            // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
          });
        } else {
          mui.toast('获取签名失败' + JSON.stringify(res))
        }
      },
      error: function() {
        mui.toast('获取签名异常' + JSON.stringify(res))
      }
    })
    getGoldcoin()
    //选择货道
    $('#select_goods #okBtn').on('tap', function () {
      var way = $('.goods_num').text()
      startGame(studioDetail.RoomId, way)
    })
    //取消选择货道
    $('#select_goods #cancelBtn').on('tap', function () {
      $('.dialog').hide();
    })
    //充值金币
    $('#show_dialog_glod').on('tap', function () {
      $('#gold_coin_pay').show()
      if (Balance < 10) {
        $('.wraning').text('金币不足，请先充值')
      }
    })
    //关闭充值金币
    $('.dialog').on('tap', function (e) {
      if (e.target.classList[0] == 'dialog' || e.target.id == 'close') {
        $('.dialog').hide()
      }
    })
    //选择充值金额
    $('.pay_btns .pay_btn').on('tap', function () {
      $(this).addClass('active').siblings().removeClass('active')
      money = $(this).find('.rmb').text().slice(0, -1)
    })

    $('#get_goods #cancelBtn').on('tap', function () {
      window.location.href = "./me_adress_add.html"
      // mui.openWindow({
      //   url: './me_adress.html',
      //   id: 'me_adress'
      // })
    })
    $('#get_goods #okBtn').on('tap', function () {
      $('#get_goods').hide()
      // mui.openWindow({
      //   url: './me_adress.html',
      //   id: 'me_adress'
      // })
    })
  })
  //获取金币
  function getGoldcoin() {
    $http({
      url: '/auth/user/v2/get/user/info',
      data: {
        token: localStorage.getItem('token')
      },
      success: function (res) {
        Balance = res.msg.Balance
        console.log(JSON.stringify(res))
        if (res.code == 10000) {
          $('#gold_coin_num').text(Balance)
        } else {

        }
      }
    })
  }
  //开始游戏
  function startGame(id, way) {
    $('#select_goods').hide();
    $('#loading_wrap').show();
    // alert('开始游戏的roomid'+id)
    $http({
      url: '/auth/user/v2/start/game',
      data: {
        id: id,
        way: way,
        token: localStorage.getItem('token')
      },
      success: function (res) {
        if (res.code == 10000) {
          $('#loading_wrap').hide();
        } else {
          mui.toast(res.msg)
          $('#loading_wrap').hide();
        }
      },
    })
  }
  //连接游戏间
  function initWebsocket() {
    //用户进入房间函数，每个用户进入房间，在线人数加1
    function Addpeople(data) {
      // alert('人数加一')
      onlineStr = JSON.parse(data).Online
      window.setTimeout(function () {
        $('#online_txt').html(onlineStr + '人')
        console.log(onlineStr)
      }, 500)
    }
    //游戏结果返回回调函数
    function GameEnd(res) {
      // if(!res.data) return false;
      var response = JSON.parse(res)
      windwo.setTimeout(function() {
        $('#get_goods').show()
        // alert(localStorage.getItem('uid'))
        // alert(response.Uid)
        if (localStorage.getItem('uid') == response.Uid) {
          $('#meGet').show()
          $('#otherGet').hide()
          $('#getGoodsUserName').text('你')
        } else {
          $('#meGet').hide()
          $('#otherGet').show()
          $('#getGoodsUserName').text(response.Name)
        }
        $('#goodsPrice').text(response.GoodPric)
        $('#goodsName').text(response.GoodName)
      },1000)
    }
    //被服务器踢出回调
    function Kickout() {
      console.log("被服务器踢出");
    }
    //服务重启或者关闭回调
    function Serverclose() {
      console.log("服务器关闭");
    }
    //注册回调函数
    RegisterCallBackFunc(Addpeople, GameEnd, Kickout, Serverclose);
    // alert('链接socket roomid'+studioDetail.RoomId + 'uid' + localStorage.getItem('uid'))
    WebSocketStart("ws://211.149.179.254:5250?room=" + studioDetail.RoomId+ "&uid=" + localStorage.getItem('uid'))
  }
</script>

</html>